{
    "ClientConfiguration": {
        "ConfigurationName": "Simple Учет",
        "ConfigurationDescription": "Простое решение для работы с штрихкодами товаров. Поставляется в комплекте с расширением для 1С. Подробнее про расширение Вы можете узнать по ссылке: https://www.simple-kit.ru/products/simple-uchet/ ",
        "ConfigurationVersion": "0.1.0",
        "Processes": [
            {
                "type": "Process",
                "ProcessName": "Документы",
                "PlanFactHeader": "...",
                "DefineOnBackPressed": true,
                "hidden": false,
                "login_screen": false,
                "SC": false,
                "Operations": [
                    {
                        "Name": "Плитки",
                        "type": "Operation",
                        "Elements": [
                            {
                                "Value": "@tiles",
                                "Variable": "tiles",
                                "type": "Tiles",
                                "weight": "0",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@gtin",
                                        "Variable": ""
                                    },
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "@series",
                                        "Variable": ""
                                    }
                                ]
                            }
                        ],
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "hideBottomBarScreen": true,
                        "onlineOnStart": false,
                        "onlineOnInput": false,
                        "onlineOnAfterStart": false,
                        "DefOnCreate": "",
                        "send_when_opened": false,
                        "DefOnAfterCreate": "",
                        "send_after_opened": false,
                        "DefOnInput": "",
                        "DefOnlineOnCreate": "",
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "tiles_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "tiles_on_select",
                                "postExecute": ""
                            }
                        ]
                    },
                    {
                        "type": "Operation",
                        "Name": "Документы",
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": true,
                        "hideBottomBarScreen": true,
                        "onlineOnStart": false,
                        "send_when_opened": false,
                        "onlineOnInput": false,
                        "DefOnlineOnCreate": "",
                        "DefOnlineOnInput": "",
                        "DefOnCreate": "",
                        "DefOnInput": "",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "match_parent",
                                "width": "match_parent",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "LinearLayout",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "Elements": [
                                            {
                                                "type": "SpinnerLayout",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Value": "@doc_type_select",
                                                "Variable": "doc_type_click",
                                                "gravity_horizontal": "left"
                                            },
                                            {
                                                "type": "Button",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Value": "+",
                                                "Variable": "btn_add_doc",
                                                "TextBold": true,
                                                "gravity_horizontal": "center"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "CardsLayout",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@docCards",
                                        "Variable": "doc_cards"
                                    }
                                ]
                            }
                        ],
                        "onlineOnAfterStart": false,
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "docs_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "docs_on_select",
                                "postExecute": ""
                            }
                        ]
                    },
                    {
                        "Name": "Документ товары",
                        "type": "Operation",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "@doc_type",
                                        "Variable": "",
                                        "TextBold": true,
                                        "TextSize": "18"
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "Elements": [
                                            {
                                                "type": "TextView",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Value": "@doc_n",
                                                "Variable": "",
                                                "TextBold": true,
                                                "TextSize": "24",
                                                "TextColor": "#7A005C"
                                            },
                                            {
                                                "type": "TextView",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Value": "@doc_date",
                                                "Variable": ""
                                            }
                                        ]
                                    },
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "@warehouse",
                                        "Variable": ""
                                    },
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "@countragent",
                                        "Variable": "",
                                        "orientation": "vertical",
                                        "Elements": []
                                    },
                                    {
                                        "type": "CardsLayout",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@doc_goods",
                                        "Variable": "doc_goods"
                                    },
                                    {
                                        "type": "Button",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "Отметить к отправке",
                                        "Variable": "btn_doc_mark_verified"
                                    }
                                ]
                            },
                            {
                                "Value": "",
                                "Variable": "barcode_camera",
                                "type": "barcode"
                            }
                        ],
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "hideBottomBarScreen": true,
                        "onlineOnStart": false,
                        "onlineOnInput": false,
                        "DefOnInput": "",
                        "DefOnCreate": "",
                        "send_when_opened": false,
                        "onlineOnAfterStart": false,
                        "DefOnlineOnCreate": "",
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "doc_details_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "doc_details_listener",
                                "postExecute": ""
                            }
                        ]
                    },
                    {
                        "Name": "Товар",
                        "type": "Operation",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "@Doc_data",
                                        "Variable": ""
                                    },
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@Good",
                                        "Variable": "",
                                        "TextSize": "24",
                                        "TextBold": true,
                                        "TextColor": "#7A005C",
                                        "BackgroundColor": ""
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "Elements": [
                                            {
                                                "type": "LinearLayout",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Value": "",
                                                "Variable": "",
                                                "orientation": "vertical",
                                                "Elements": [
                                                    {
                                                        "type": "TextView",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "Value": "План",
                                                        "Variable": ""
                                                    },
                                                    {
                                                        "type": "TextView",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "Value": "@qtty_plan",
                                                        "Variable": "",
                                                        "TextSize": "24"
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Value": "",
                                                "Variable": "",
                                                "orientation": "vertical",
                                                "Elements": [
                                                    {
                                                        "type": "TextView",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "Value": "Факт",
                                                        "Variable": ""
                                                    },
                                                    {
                                                        "type": "EditTextNumeric",
                                                        "height": "wrap_content",
                                                        "width": "match_parent",
                                                        "weight": "0",
                                                        "Value": "@qtty",
                                                        "Variable": "qtty",
                                                        "TextSize": "24"
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "Elements": [
                                            {
                                                "type": "TextView",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Value": "Цена",
                                                "Variable": ""
                                            },
                                            {
                                                "type": "EditTextNumeric",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "0",
                                                "Value": "@price",
                                                "Variable": "price"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "Elements": [
                                            {
                                                "type": "Button",
                                                "height": "wrap_content",
                                                "width": "match_parent",
                                                "weight": "1",
                                                "Value": "Сохранить",
                                                "Variable": "btn_ok"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "CardsLayout",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@barcode_cards",
                                        "Variable": "barcode_cards"
                                    }
                                ]
                            },
                            {
                                "Value": "@photoGallery",
                                "Variable": "photoGallery",
                                "type": "HorizontalGallery"
                            },
                            {
                                "Value": "",
                                "Variable": "photo",
                                "type": "photo"
                            },
                            {
                                "Value": "",
                                "Variable": "photo",
                                "type": "photoGallery"
                            }
                        ],
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "hideBottomBarScreen": true,
                        "onlineOnStart": false,
                        "onlineOnInput": false,
                        "DefOnInput": "",
                        "onlineOnAfterStart": false,
                        "DefOnlineOnCreate": "",
                        "send_when_opened": false,
                        "DefOnCreate": "",
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "elem_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "elem_on_click",
                                "postExecute": ""
                            }
                        ]
                    },
                    {
                        "Name": "Новый документ",
                        "type": "Operation",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "match_parent",
                                "width": "match_parent",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "SpinnerLayout",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "@doc_type_select",
                                        "Variable": "doc_type_click"
                                    },
                                    {
                                        "type": "EditTextText",
                                        "height": "wrap_content",
                                        "width": 50,
                                        "weight": "0",
                                        "Value": "@fld_number",
                                        "Variable": "",
                                        "width_value": "50"
                                    },
                                    {
                                        "type": "DateField",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "@doc_date",
                                        "Variable": "fld_data"
                                    },
                                    {
                                        "type": "EditTextAutocomplete",
                                        "show_by_condition": "",
                                        "height": "wrap_content",
                                        "NoRefresh": true,
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@countragent",
                                        "Variable": "fld_countragent",
                                        "gravity_horizontal": "left"
                                    },
                                    {
                                        "type": "EditTextAutocomplete",
                                        "NoRefresh": true,
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@warehouse",
                                        "Variable": "doc_warehouse",
                                        "gravity_horizontal": "left"
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "Elements": [
                                            {
                                                "type": "Button",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Value": "Сохранить",
                                                "Variable": "btn_ok"
                                            },
                                            {
                                                "type": "Button",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Value": "Отменить",
                                                "Variable": "btn_cancel"
                                            }
                                        ]
                                    }
                                ]
                            }
                        ],
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "hideBottomBarScreen": true,
                        "onlineOnStart": false,
                        "onlineOnInput": false,
                        "DefOnCreate": "",
                        "DefOnInput": "",
                        "send_when_opened": false,
                        "onlineOnAfterStart": false,
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "new_doc_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "new_doc_on_select",
                                "postExecute": ""
                            }
                        ]
                    },
                    {
                        "Name": "Документ штрихкоды",
                        "type": "Operation",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "CardsLayout",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@barc_cards",
                                        "Variable": "barcode_cards"
                                    }
                                ]
                            }
                        ],
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "hideBottomBarScreen": true,
                        "onlineOnStart": false,
                        "onlineOnInput": false,
                        "DefOnCreate": "",
                        "DefOnInput": "",
                        "send_when_opened": false,
                        "onlineOnAfterStart": false,
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "doc_barcodes_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "doc_barcodes_listener",
                                "postExecute": ""
                            }
                        ]
                    },
                    {
                        "Name": "Удаление штрихкода",
                        "type": "Operation",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "Товар с такой маркировкой уже есть в документе!",
                                        "Variable": ""
                                    },
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@good",
                                        "Variable": "id_good",
                                        "TextColor": "#7A005C",
                                        "TextSize": "24",
                                        "TextBold": true
                                    },
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "@code_art",
                                        "Variable": ""
                                    },
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@unit_name",
                                        "Variable": "id_unit"
                                    },
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@barcode_value",
                                        "Variable": "barcode_value1"
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "Elements": [
                                            {
                                                "type": "Button",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Value": "Отменить",
                                                "Variable": "btn_barcode_cancel"
                                            },
                                            {
                                                "type": "Button",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Value": "Удалить",
                                                "Variable": "btn_barcode_delete"
                                            }
                                        ]
                                    }
                                ]
                            }
                        ],
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "hideBottomBarScreen": true,
                        "onlineOnStart": false,
                        "onlineOnInput": false,
                        "DefOnCreate": "",
                        "DefOnInput": "",
                        "send_when_opened": false,
                        "onlineOnAfterStart": false,
                        "DefOnlineOnCreate": "",
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "delete_barcode_screen_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "delete_barcode_screen_click",
                                "postExecute": ""
                            }
                        ]
                    },
                    {
                        "Name": "Ошибка сканера",
                        "type": "Operation",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "@scanned_barcode",
                                        "Variable": "scanned_barcode"
                                    },
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "ОШИБКА",
                                        "Variable": "",
                                        "TextColor": "",
                                        "TextSize": "24"
                                    },
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "Товар не найден по штрихкоду!",
                                        "Variable": ""
                                    },
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "Сканер отключен",
                                        "Variable": ""
                                    },
                                    {
                                        "type": "Button",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "Продолжить сканирование",
                                        "Variable": "btn_continue_scan"
                                    }
                                ]
                            }
                        ],
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "hideBottomBarScreen": true,
                        "onlineOnStart": false,
                        "onlineOnInput": false,
                        "DefOnInput": "",
                        "onlineOnAfterStart": false,
                        "Handlers": [
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "barcode_error_screen_listener",
                                "postExecute": ""
                            }
                        ]
                    }
                ]
            },
            {
                "ProcessName": "Товары",
                "type": "Process",
                "Operations": [
                    {
                        "Name": "Товары список",
                        "type": "Operation",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "CardsLayout",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "@goods_cards",
                                        "Variable": "cards_item"
                                    }
                                ]
                            }
                        ],
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "hideBottomBarScreen": true,
                        "onlineOnStart": false,
                        "onlineOnInput": false,
                        "DefOnCreate": "",
                        "noConfirmation": true,
                        "DefOnInput": "",
                        "send_when_opened": false,
                        "onlineOnAfterStart": false,
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "goods_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "goods_on_click",
                                "postExecute": ""
                            }
                        ]
                    },
                    {
                        "Name": "Цены товара",
                        "type": "Operation",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "@name",
                                        "Variable": "",
                                        "TextColor": "18",
                                        "TextBold": true
                                    },
                                    {
                                        "type": "LinearLayout",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "Elements": [
                                            {
                                                "type": "TextView",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Value": "@code",
                                                "Variable": "",
                                                "TextSize": "16"
                                            },
                                            {
                                                "type": "TextView",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Value": "@type_name",
                                                "Variable": ""
                                            }
                                        ]
                                    },
                                    {
                                        "type": "CardsLayout",
                                        "height": "match_parent",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@good_prices",
                                        "Variable": "good_prices"
                                    }
                                ]
                            }
                        ],
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "hideBottomBarScreen": true,
                        "onlineOnStart": false,
                        "onlineOnInput": false,
                        "DefOnCreate": "",
                        "DefOnInput": "",
                        "send_when_opened": false,
                        "onlineOnAfterStart": false,
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "price_on_start",
                                "postExecute": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "price_on_click",
                                "postExecute": ""
                            }
                        ]
                    }
                ],
                "DefineOnBackPressed": true
            },
            {
                "ProcessName": "Настройки",
                "type": "Process",
                "Operations": [
                    {
                        "Name": "Настройки и обмен",
                        "type": "Operation",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@ip_adr",
                                        "Variable": "text_ip",
                                        "TextSize": "25"
                                    },
                                    {
                                        "type": "CheckBox",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "Отображать серии",
                                        "Variable": "use_series"
                                    },
                                    {
                                        "type": "CheckBox",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "Отображать характеристики",
                                        "Variable": "use_properties"
                                    },
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "Настройки маркировки",
                                        "Variable": "",
                                        "drawable": "plus"
                                    },
                                    {
                                        "type": "CheckBox",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "ИспользоватьМаркировку",
                                        "Variable": "use_mark",
                                        "gravity_horizontal": "left"
                                    },
                                    {
                                        "type": "CheckBox",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "Запретить сканирование сверх плана",
                                        "Variable": "allow_overscan"
                                    },
                                    {
                                        "type": "EditTextText",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@ip_host",
                                        "Variable": "ip_host",
                                        "height_value": "0",
                                        "width_value": "0"
                                    },
                                    {
                                        "type": "ProgressButton",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "Скопировать базу на компьютер",
                                        "Variable": "btn_copy_base",
                                        "height_value": "0",
                                        "width_value": "0"
                                    },
                                    {
                                        "type": "EditTextText",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@path",
                                        "Variable": "path",
                                        "gravity_horizontal": "left"
                                    },
                                    {
                                        "type": "CheckBox",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "Удалять файлы после загрузки",
                                        "Variable": "delete_files"
                                    },
                                    {
                                        "type": "ProgressButton",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "Загрузить локальные файлы",
                                        "Variable": "btn_local_files"
                                    },
                                    {
                                        "type": "ProgressButton",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "Выгрузить данные",
                                        "Variable": "btn_export"
                                    },
                                    {
                                        "type": "ProgressButton",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "Создать таблицы",
                                        "Variable": "btn_init"
                                    },
                                    {
                                        "type": "ProgressButton",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "Список локальных файлов",
                                        "Variable": "btn_files_list"
                                    },
                                    {
                                        "type": "ProgressButton",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "Версия конфигурации",
                                        "Variable": "btn_conf_version"
                                    }
                                ],
                                "BackgroundColor": "",
                                "StrokeWidth": "",
                                "Padding": ""
                            }
                        ],
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "hideBottomBarScreen": true,
                        "onlineOnStart": false,
                        "onlineOnInput": false,
                        "DefOnCreate": "",
                        "DefOnInput": "",
                        "noConfirmation": true,
                        "send_when_opened": false,
                        "onlineOnAfterStart": false,
                        "DefOnlineOnCreate": "",
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "settings_on_start",
                                "postExecute": "",
                                "listener": ""
                            },
                            {
                                "event": "onInput",
                                "action": "run",
                                "type": "python",
                                "method": "settings_on_click",
                                "postExecute": ""
                            }
                        ]
                    },
                    {
                        "Name": "СписокФайлов",
                        "type": "Operation",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "MultilineText",
                                        "height": "match_parent",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@files_list",
                                        "Variable": "files_list"
                                    }
                                ],
                                "BackgroundColor": "",
                                "StrokeWidth": "",
                                "Padding": ""
                            }
                        ],
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "hideBottomBarScreen": false,
                        "onlineOnStart": false,
                        "onlineOnAfterStart": false,
                        "onlineOnInput": false,
                        "DefOnCreate": "",
                        "send_when_opened": false,
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "file_list_on_start",
                                "postExecute": ""
                            }
                        ]
                    }
                ],
                "hidden": false
            },
            {
                "CVOperationName": "ActiveCV",
                "type": "CVOperation",
                "CVFrames": [
                    {
                        "Name": "Новый шаг ActiveCV",
                        "type": "CVFrame",
                        "CVOnline": false,
                        "CVDetector": "Objects_Full",
                        "CVResolution": "HD720",
                        "CVMode": "green_and_grey",
                        "CVCameraDevice": "Back",
                        "CVDetectorMode": "train"
                    }
                ],
                "hidden": true
            },
            {
                "ProcessName": "Новый процесс",
                "type": "Process",
                "Operations": [
                    {
                        "Name": "Создать таблицы",
                        "type": "Operation",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "Button",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "Создать таблицы",
                                        "Variable": "btn_init"
                                    }
                                ]
                            }
                        ],
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "hideBottomBarScreen": false,
                        "onlineOnStart": false,
                        "onlineOnInput": false,
                        "DefOnCreate": "",
                        "send_when_opened": false,
                        "onlineOnAfterStart": false,
                        "Handlers": [
                            {
                                "event": "onStart",
                                "action": "run",
                                "type": "python",
                                "method": "app_on_start",
                                "postExecute": ""
                            }
                        ]
                    }
                ],
                "hidden": true
            }
        ],
        "ConfigurationSettings": {
            "uid": "a6ce59bc3f714a5284213f6e293e3e91",
            "vendor": "Simple-kit"
        },
        "ConfigurationTags": "Py,off-line,ActiveCV®",
        "PyHandlers": "ZnJvbSBydS50cmF2ZWxmb29kLnNpbXBsZV91aSBpbXBvcnQgU2ltcGxlVXRpbGl0ZXMgYXMgc3VDbGFzcwppbXBvcnQgdWlfY3N2CmltcG9ydCB1aV9nbG9iYWwKaW1wb3J0IHVpX2Zvcm1fZGF0YQppbXBvcnQgc29ja2V0CmltcG9ydCBqc29uCmltcG9ydCByZXF1ZXN0cwppbXBvcnQgZGF0YWJhc2VfaW5pdF9xdWVyeWVzCmltcG9ydCBvcwpmcm9tIFBJTCBpbXBvcnQgSW1hZ2UKaW1wb3J0IGltcG9ydGxpYgoKaW1wb3J0bGliLnJlbG9hZCh1aV9jc3YpCmltcG9ydGxpYi5yZWxvYWQodWlfZ2xvYmFsKQppbXBvcnRsaWIucmVsb2FkKHVpX2Zvcm1fZGF0YSkKaW1wb3J0bGliLnJlbG9hZChkYXRhYmFzZV9pbml0X3F1ZXJ5ZXMpCgojLS0tLS0KIzAxMDA2MDg5NDA1NTM4ODYyMTUsaVBHU1FwQnQhJkIKZGVmIHNldHRpbmdzX29uX3N0YXJ0KGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgICNoYXNoTWFwLnB1dCgndG9hc3QnLCfQvtCx0L3QvtCy0LjQu9C40YHRjCcpCiAgICBzID0gc29ja2V0LnNvY2tldChzb2NrZXQuQUZfSU5FVCwgc29ja2V0LlNPQ0tfREdSQU0pCiAgICB0cnk6CiAgICAgICAgcy5jb25uZWN0KCgiOC44LjguOCIsIDgwKSkKICAgICAgICBhYSA9IChzLmdldHNvY2tuYW1lKClbMF0pCiAgICAgICAgIyBhYSA9IGhhc2hNYXAuZ2V0KCdpcF9hZHInKQogICAgICAgIGhhc2hNYXAucHV0KCdpcF9hZHInLCBhYSkKICAgICAgICAjIGhhc2hNYXAucHV0KCd0b2FzdCcsIGFhKQogICAgZXhjZXB0OgogICAgICAgIGhhc2hNYXAucHV0KCdpcF9hZHInLCAn0L3QtdGCINGB0LXRgtC4JykKICAgICNhcHBfb25fc3RhcnQoaGFzaE1hcCkKICAgICMg0JfQvdCw0YfQtdC90LjRjyDQutC+0L3RgdGC0LDQvdGCINC4INC90LDRgdGC0YDQvtC10LoKICAgIHJlcyA9IHVpX2dsb2JhbC5nZXRfY29uc3RhbnRzKCkKICAgIGlmIHJlczoKICAgICAgICBoYXNoTWFwLnB1dCgndXNlX3NlcmllcycsIHN0cihyZXNbMV0pKQogICAgICAgIGhhc2hNYXAucHV0KCd1c2VfcHJvcGVydGllcycsIHN0cihyZXNbMl0pKQogICAgICAgIGhhc2hNYXAucHV0KCd1c2VfbWFyaycsIHN0cihyZXNbM10pKQogICAgICAgIGhhc2hNYXAucHV0KCdhZGRfaWZfbm90X2luX3BsYW4nLHN0cihyZXNbNF0pKQogICAgICAgIGhhc2hNYXAucHV0KCdwYXRoJywgc3RyKHJlc1s1XSkpCiAgICAgICAgaGFzaE1hcC5wdXQoJ2RlbGV0ZV9maWxlcycsIHN0cihyZXNbNl0pKQogICAgICAgIGhhc2hNYXAucHV0KCdhbGxvd19vdmVyc2NhbicsIHN0cihyZXNbOV0pKQoKICAgIGlmIG5vdCBoYXNoTWFwLmNvbnRhaW5zS2V5KCdpcF9ob3N0Jyk6CiAgICAgICAgaGFzaE1hcC5wdXQoJ2lwX2hvc3QnLCAnMTkyLjE2OC4xLjc3JykKCiAgICByZXR1cm4gaGFzaE1hcAoKCmRlZiBzZXR0aW5nc19vbl9jbGljayhoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICB1c2Vfc2VyaWVzID0gaGFzaE1hcC5nZXQoJ3VzZV9zZXJpZXMnKQogICAgdXNlX3Byb3BlcnRpZXMgPSBoYXNoTWFwLmdldCgndXNlX3Byb3BlcnRpZXMnKQogICAgdXNlX21hcmsgPSBoYXNoTWFwLmdldCgndXNlX21hcmsnKQogICAgZGVsZXRlX2ZpbGVzID0gaGFzaE1hcC5nZXQoJ2RlbGV0ZV9maWxlcycpCiAgICBhZGRfaWZfbm90X2luX3BsYW4gPSBoYXNoTWFwLmdldCgnYWRkX2lmX25vdF9pbl9wbGFuJykKICAgIGFsbG93X292ZXJzY2FuID0gaGFzaE1hcC5nZXQoJ2FsbG93X292ZXJzY2FuJykKICAgIHBhdGggPSBoYXNoTWFwLmdldCgncGF0aCcpCgogICAgaWYgdXNlX3NlcmllcyBpcyBOb25lOiB1c2Vfc2VyaWVzID0gJ2ZhbHNlJwogICAgaWYgdXNlX3Byb3BlcnRpZXMgaXMgTm9uZTogdXNlX3Byb3BlcnRpZXMgPSAnZmFsc2UnCiAgICBpZiB1c2VfbWFyayBpcyBOb25lOiB1c2VfbWFyayA9ICdmYWxzZScKICAgIGlmIGFkZF9pZl9ub3RfaW5fcGxhbiBpcyBOb25lOiBhZGRfaWZfbm90X2luX3BsYW4gPSAnZmFsc2UnCiAgICBpZiBwYXRoIGlzIE5vbmU6IHBhdGggPSAnLy9zdG9yYWdlL2VtdWxhdGVkLzAvQW5kcm9pZC9kYXRhL3J1LnRyYXZlbGZvb2Quc2ltcGxlX3VpLycgIycvL3N0b3JhZ2UvZW11bGF0ZWQvMC9kb3dubG9hZC8nCiAgICBpZiBkZWxldGVfZmlsZXMgaXMgTm9uZTogZGVsZXRlX2ZpbGVzID0gJ2ZhbHNlJwogICAgaWYgYWxsb3dfb3ZlcnNjYW4gaXMgTm9uZTogYWxsb3dfb3ZlcnNjYW4gPSAnZmFsc2UnCiAgICB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdCgnVXBkYXRlIFJTX2RvY3MgU0VUIGNvbnRyb2wgPSA/JywoYWxsb3dfb3ZlcnNjYW4sKSkgICPQkiDRgtCw0LHQu9C40YbRiyDQtNC+0LrRg9C80LXQvdGC0L7QsiDQt9Cw0L/QuNGB0YvQstCw0LXQvCDQvdC+0LLQvtC1INC30L3QsNGH0LXQvdC40LUg0LrQvtC90YLRgNC+0LvRjwogICAgdWlfZ2xvYmFsLnB1dF9jb25zdGFudHMoKHVzZV9zZXJpZXMsIHVzZV9wcm9wZXJ0aWVzLCB1c2VfbWFyaywgYWRkX2lmX25vdF9pbl9wbGFuLCBwYXRoLCBkZWxldGVfZmlsZXMsIGFsbG93X292ZXJzY2FuKSkKICAgIGxpc3RlbmVyID0gaGFzaE1hcC5nZXQoJ2xpc3RlbmVyJykKICAgIGlmIGxpc3RlbmVyID09ICdidG5fY29weV9iYXNlJzoKICAgICAgICBpcF9ob3N0ID0gaGFzaE1hcC5nZXQoJ2lwX2hvc3QnKQogICAgICAgIGlmIG9zLnBhdGguaXNmaWxlKCcvL2RhdGEvZGF0YS9ydS50cmF2ZWxmb29kLnNpbXBsZV91aS9kYXRhYmFzZXMvU2ltcGxlV01TJyk6CiAgICAgICAgICAgIHdpdGggb3BlbignLy9kYXRhL2RhdGEvcnUudHJhdmVsZm9vZC5zaW1wbGVfdWkvZGF0YWJhc2VzL1NpbXBsZVdNUycsICdyYicpIGFzIGY6ICAjcmlnaHRzY2FuCiAgICAgICAgICAgICAgICByID0gcmVxdWVzdHMucG9zdCgnaHR0cDovLycgKyBpcF9ob3N0ICsgJzoyNDQ0L3Bvc3QnLCBmaWxlcz17J1NpbXBsZVdNUyc6IGZ9KSAjcmlnaHRzY2FuCiAgICAgICAgICAgIGlmIHIuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ3RvYXN0JywgJ9CR0LDQt9CwIFNRTGl0ZSDRg9GB0L/QtdGI0L3QviDQstGL0LPRgNGD0LbQtdC90LAnKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ3RvYXN0JywgJ9Ce0YjQuNCx0LrQsCDRgdC+0LXQtNC40L3QtdC90LjRjycpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ3RvYXN0JywgJ9Ck0LDQudC7INC90LUg0L3QsNC50LTQtdC9JykKCiAgICBlbGlmIGxpc3RlbmVyID09ICdidG5fbG9jYWxfZmlsZXMnOgogICAgICAgICMgcGF0aCA9IGhhc2hNYXAuZ2V0KCdsb2NhbHBhdGgnKQogICAgICAgIHBhdGggPSBoYXNoTWFwLmdldCgncGF0aCcpCiAgICAgICAgZGVsZXRlX2ZpbGVzID0gaGFzaE1hcC5nZXQoJ2RlbGV0ZV9maWxlcycpCiAgICAgICAgaWYgbm90IGRlbGV0ZV9maWxlczogZGVsZXRlX2ZpbGVzID0gJzAnCiAgICAgICAgaWYgbm90IHBhdGg6IHBhdGggPSAnLy9zdG9yYWdlL2VtdWxhdGVkLzAvZG93bmxvYWQvJwoKICAgICAgICByZXRfdGV4dCA9IHVpX2Nzdi5saXN0X2ZvbGRlcihwYXRoLCBkZWxldGVfZmlsZXMpCgogICAgICAgIGhhc2hNYXAucHV0KCd0b2FzdCcsIHJldF90ZXh0KQogICAgZWxpZiBsaXN0ZW5lciA9PSAnYnRuX2V4cG9ydCc6CgogICAgICAgIHVpX2Nzdi5leHBvcnRfY3N2KHBhdGgsIGhhc2hNYXAuZ2V0KCdpcF9hZHInKSwgaGFzaE1hcC5nZXQoJ0FORFJPSURfSUQnKSkKICAgICAgICBoYXNoTWFwLnB1dCgndG9hc3QnLCAn0JTQsNC90L3Ri9C1INCy0YvQs9GA0YPQttC10L3RiycpCgogICAgZWxpZiBsaXN0ZW5lciA9PSAnT05fQkFDS19QUkVTU0VEJzoKCiAgICAgICAgaGFzaE1hcC5wdXQoJ0ZpbmlzaFByb2Nlc3MnLCAnJykKCiAgICBlbGlmIGxpc3RlbmVyID09ICdidG5fZmlsZXNfbGlzdCc6CiAgICAgICAgaGFzaE1hcC5wdXQoJ1Nob3dTY3JlZW4nLCfQodC/0LjRgdC+0LrQpNCw0LnQu9C+0LInKQogICAgZWxpZiBsaXN0ZW5lciA9PSAnYnRuX2NvbmZfdmVyc2lvbic6CiAgICAgICAgY29uZiA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoJ19jb25maWd1cmF0aW9uICcpKQoKICAgIHJldHVybiBoYXNoTWFwCgoKZGVmIGdvb2RzX29uX3N0YXJ0KGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgICMgaGFzaE1hcC5wdXQoIm1tX2xvY2FsIiwgIiIpCiAgICAjIGhhc2hNYXAucHV0KCJtbV9jb21wcmVzc2lvbiIsICI3MCIpCiAgICAjIGhhc2hNYXAucHV0KCJtbV9zaXplIiwgIjY1IikKICAgIGxpc3QgPSB1aV9mb3JtX2RhdGEuZ2V0X2dvb2RzX2NhcmQoKQogICAgbGlzdFsnY3VzdG9tY2FyZHMnXVsnY2FyZHNkYXRhJ10gPSBbXQogICAgcXVlcnlfdGV4dCA9IHVpX2Zvcm1fZGF0YS5nZXRfZ29vZHNfcXVlcnkoKQoKICAgIHJlc3VsdHMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV90ZXh0KQoKICAgIGZvciByZWNvcmQgaW4gcmVzdWx0czoKICAgICAgICBwcm9kdWN0X3JvdyA9IHsKICAgICAgICAgICAgJ2tleSc6IHN0cihyZWNvcmRbMF0pLAogICAgICAgICAgICAnR1RJTic6IHN0cihyZWNvcmRbMF0pLAogICAgICAgICAgICAnbmFtZSc6IHN0cihyZWNvcmRbM10pLAogICAgICAgICAgICAnY29kZSc6IHN0cihyZWNvcmRbMV0pLAogICAgICAgICAgICAndHlwZV9uYW1lJzogc3RyKHJlY29yZFs1XSksCiAgICAgICAgICAgICd1bml0X25hbWUnOiBzdHIocmVjb3JkWzddKQogICAgICAgIH0KICAgICAgICBsaXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXS5hcHBlbmQocHJvZHVjdF9yb3cpCiAgICAjICoqKioqKioqKioqKioqKioqKioqKioKICAgIGhhc2hNYXAucHV0KCJnb29kc19jYXJkcyIsIGpzb24uZHVtcHMobGlzdCkpCgogICAgcmV0dXJuIGhhc2hNYXAKCgojINCX0LDQv9C+0LvQvdC10L3QuNC1INGB0L/QuNGB0LrQsCDQtNC+0LrRg9C80LXQvdGC0L7QsgpkZWYgcmVmaWxsX2RvY3NfbGlzdChmaWx0ZXI9JycpOgogICAgZG9jX2xpc3QgPSB1aV9mb3JtX2RhdGEuZ2V0X2RvY19jYXJkKCkKICAgIGRvY19saXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXSA9IFtdCgogICAgcXVlcnlfdGV4dCA9IHVpX2Zvcm1fZGF0YS5nZXRfZG9jX3F1ZXJ5KGZpbHRlcikKCiAgICBpZiBmaWx0ZXIgPT0gJycgb3IgZmlsdGVyID09ICfQktGB0LUnOgogICAgICAgIHJlc3VsdHMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV90ZXh0KQogICAgZWxzZToKICAgICAgICByZXN1bHRzID0gdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXVlcnlfdGV4dCwgKGZpbHRlciwpKQoKICAgIGZvciByZWNvcmQgaW4gcmVzdWx0czoKICAgICAgICBpZiByZWNvcmRbOF0gPT0gMToKICAgICAgICAgICAgY29tcGxldGVkID0gJ3RydWUnCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY29tcGxldGVkID0gJ2ZhbHNlJwogICAgICAgIHByb2R1Y3Rfcm93ID0gewogICAgICAgICAgICAnY29tcGxldGVkJzogY29tcGxldGVkLAogICAgICAgICAgICAndHlwZSc6IHN0cihyZWNvcmRbMV0pLAogICAgICAgICAgICAnbnVtYmVyJzogc3RyKHJlY29yZFsyXSksCiAgICAgICAgICAgICdkYXRhJzogc3RyKHJlY29yZFszXSksCiAgICAgICAgICAgICdrZXknOiByZWNvcmRbMF0sCiAgICAgICAgICAgICd3YXJlaG91c2UnOiByZWNvcmRbN10sCiAgICAgICAgICAgICdjb3VudHJhZ2VudCc6IHJlY29yZFs2XSwKICAgICAgICAgICAgJ2FkZF9tYXJrX3NlbGVjdGlvbic6IHJlY29yZFsxMF0KICAgICAgICB9CiAgICAgICAgZG9jX2xpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddLmFwcGVuZChwcm9kdWN0X3JvdykKCiAgICByZXR1cm4ganNvbi5kdW1wcyhkb2NfbGlzdCkKCgpkZWYgZG9jc19vbl9zdGFydChoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICAjINCX0LDQv9C+0LvQvdC40Lwg0L/QvtC70LUg0YTQuNC70YzRgtGA0LAg0L/QviDQstC40LTRgyDQtNC+0LrRg9C80LXQvdGC0L7QsgogICAgcmVzdWx0ID0gdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQodWlfZm9ybV9kYXRhLmdldF9kb2NfdHlwZV9xdWVyeSgpKQogICAgaWYgaGFzaE1hcC5nZXQoJ2RvY190eXBlX3NlbGVjdCcpID09IE5vbmU6CiAgICAgICAgZG9jX3R5cGVfbGlzdCA9ICfQktGB0LUnCiAgICAgICAgZm9yIHJlY29yZCBpbiByZXN1bHQ6CiAgICAgICAgICAgIGRvY190eXBlX2xpc3QgPSBkb2NfdHlwZV9saXN0ICsgKCc7JyArIHJlY29yZFswXSkKICAgICAgICBoYXNoTWFwLnB1dCgnZG9jX3R5cGVfc2VsZWN0JywgZG9jX3R5cGVfbGlzdCkKCiAgICAjIGhhc2hNYXAucHV0KCdkb2NfdHlwZV9jbGljaycsICfQktGB0LUnKQogICAgI9CV0YHQu9C4INCS0YvQt9C+0LIg0Y3QutGA0LDQvdCwINC40Lcg0LzQtdC90Y4g0L/Qu9C40YLQvtC6IC0g0L7QsdGA0LDQsdC+0YLQsNC10LwKICAgIGlmIGhhc2hNYXAuY29udGFpbnNLZXkoJ3NlbGVjdGVkX3RpbGVfa2V5Jyk6CiAgICAgICAgdGlsZV9rZXkgPSBoYXNoTWFwLmdldCgnc2VsZWN0ZWRfdGlsZV9rZXknKQogICAgICAgIGlmIHRpbGVfa2V5OgogICAgICAgICAgICBoYXNoTWFwLnB1dCgnZG9jX3R5cGVfY2xpY2snLCB0aWxlX2tleSkKICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ3NlbGVjdGVkX3RpbGVfa2V5JywgJycpCiAgICAjINCf0LXRgNC10LfQsNC/0L7Qu9C90LjQvCDRgdC/0LjRgdC+0Log0LTQvtC60YPQvNC10L3RgtC+0LIKICAgIGlmIGhhc2hNYXAuZ2V0KCdkb2NfdHlwZV9jbGljaycpID09IE5vbmU6CiAgICAgICAgbHMgPSByZWZpbGxfZG9jc19saXN0KCkKICAgIGVsc2U6CiAgICAgICAgbHMgPSByZWZpbGxfZG9jc19saXN0KGhhc2hNYXAuZ2V0KCdkb2NfdHlwZV9jbGljaycpKQogICAgaGFzaE1hcC5wdXQoImRvY0NhcmRzIiwgbHMpCgogICAgcmV0dXJuIGhhc2hNYXAKCgpkZWYgZG9jX2RldGFpbHNfb25fc3RhcnQoaGFzaE1hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgaWRfZG9jID0gaGFzaE1hcC5nZXQoJ2lkX2RvYycpCiAgICAjINCk0L7RgNC80LjRgNGD0LXQvCDRgtCw0LHQu9C40YbRgyDQutCw0YDRgtC+0YfQtdC6INC4INC30LDQv9GA0L7RgSDQuiDQsdCw0LfQtQogICAgcmVzID0gdWlfZ2xvYmFsLmdldF9jb25zdGFudHMoKQogICAgdXNlX3NlcmllcyA9IHJlc1sxXQogICAgdXNlX3Byb3BlcnRpZXMgPSByZXNbMl0KICAgIGhhc2hNYXAucHV0KCd1c2VfcHJvcGVydGllcycsIHJlc1syXSkKICAgIGRvY19kZXRhaWxfbGlzdCA9IHVpX2Zvcm1fZGF0YS5nZXRfZG9jX2RldGFpbF9jYXJkcyh1c2Vfc2VyaWVzLCB1c2VfcHJvcGVydGllcykKICAgIGRvY19kZXRhaWxfbGlzdFsnY3VzdG9tY2FyZHMnXVsnY2FyZHNkYXRhJ10gPSBbXQoKICAgICPQn9C+0LvRg9GH0LDQtdC8INGC0LXQtdC60YPRidC40Lkg0LTQvtC60YPQvNC10L3RggogICAgY3VycmVudF9zdHIgPSBoYXNoTWFwLmdldCgic2VsZWN0ZWRfY2FyZF9wb3NpdGlvbiIpCiAgICBqbGlzdCA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoJ2RvY0NhcmRzJykpCgogICAgZWxlbV9uID0gamxpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddCgogICAgZm9yIGVsIGluIGVsZW1fbjoKICAgICAgICBpZiBlbFsna2V5J10gPT0gaWRfZG9jOgogICAgICAgICAgICBoYXNoTWFwLnB1dCgnYWRkX21hcmtfc2VsZWN0aW9uJywKICAgICAgICAgICAgICAgICAgICAgICAgc3RyKGVsWydhZGRfbWFya19zZWxlY3Rpb24nXSBpZiBlbFsnYWRkX21hcmtfc2VsZWN0aW9uJ10gZWxzZSAnMCcpKQogICAgIyAgICBjdXJyZW50X2VsZW0gPSBqbGlzdFsnY3VzdG9tY2FyZHMnXVsnY2FyZHNkYXRhJ11baW50KGN1cnJlbnRfc3RyKS0xXQoKICAgIHF1ZXJ5X3RleHQgPSB1aV9mb3JtX2RhdGEuZ2V0X2RvY19kZXRhaWxzX3F1ZXJ5KCkKCiAgICByZXN1bHRzID0gdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXVlcnlfdGV4dCwgKGlkX2RvYywpLFRydWUpCgogICAgaWYgcmVzdWx0czoKICAgICAgICBoYXNoTWFwLnB1dCgnaWRfZG9jJywgc3RyKHJlc3VsdHNbMF1bJ2lkX2RvYyddKSkKICAgICAgICBmb3IgcmVjb3JkIGluIHJlc3VsdHM6CiAgICAgICAgICAgIHBpYyA9ICcjZjAyYScgaWYgcmVjb3JkWydJc0RvbmUnXSAhPSAwIGVsc2UgJyNmMDBjJwogICAgICAgICAgICBpZiByZWNvcmRbJ3F0dHknXT09MCBhbmQgcmVjb3JkWydxdHR5X3BsYW4nXT09MDoKICAgICAgICAgICAgICAgIHBpYz0nJwogICAgICAgICAgICBwcm9kdWN0X3JvdyA9IHsKICAgICAgICAgICAgICAgICdrZXknOiBzdHIocmVjb3JkWydpZCddKSwKICAgICAgICAgICAgICAgICdnb29kX25hbWUnOiBzdHIocmVjb3JkWydnb29kX25hbWUnXSksCiAgICAgICAgICAgICAgICAnaWRfZ29vZCc6IHN0cihyZWNvcmRbJ2lkX2dvb2QnXSksCiAgICAgICAgICAgICAgICAnaWRfcHJvcGVydGllcyc6IHN0cihyZWNvcmRbJ2lkX3Byb3BlcnRpZXMnXSksCiAgICAgICAgICAgICAgICAncHJvcGVydGllc19uYW1lJzogc3RyKHJlY29yZFsncHJvcGVydGllc19uYW1lJ10pLAogICAgICAgICAgICAgICAgJ2lkX3Nlcmllcyc6IHN0cihyZWNvcmRbJ2lkX3NlcmllcyddKSwKICAgICAgICAgICAgICAgICdzZXJpZXNfbmFtZSc6IHN0cihyZWNvcmRbJ3Nlcmllc19uYW1lJ10pLAogICAgICAgICAgICAgICAgJ2lkX3VuaXQnOiBzdHIocmVjb3JkWydpZF91bml0J10pLAogICAgICAgICAgICAgICAgJ3VuaXRzX25hbWUnOiBzdHIocmVjb3JkWyd1bml0c19uYW1lJ10pLAogICAgICAgICAgICAgICAgJ2NvZGVfYXJ0JzogJ9Ca0L7QtDogJyArIHN0cihyZWNvcmRbJ2NvZGUnXSksCgogICAgICAgICAgICAgICAgJ3F0dHknOiBzdHIocmVjb3JkWydxdHR5J10gaWYgcmVjb3JkWydxdHR5J10gaXMgbm90IE5vbmUgZWxzZSAwKSwKICAgICAgICAgICAgICAgICdxdHR5X3BsYW4nOiBzdHIocmVjb3JkWydxdHR5X3BsYW4nXSBpZiByZWNvcmRbJ3F0dHlfcGxhbiddIGlzIG5vdCBOb25lIGVsc2UgMCksCiAgICAgICAgICAgICAgICAncHJpY2UnOiBzdHIocmVjb3JkWydwcmljZSddIGlmIHJlY29yZFsncHJpY2UnXSBpcyBub3QgTm9uZSBlbHNlIDApLAogICAgICAgICAgICAgICAgJ3ByaWNlX25hbWUnOiBzdHIocmVjb3JkWydwcmljZV9uYW1lJ10pLAogICAgICAgICAgICAgICAgJ3BpY3R1cmUnOiBwaWMKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZG9jX2RldGFpbF9saXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXS5hcHBlbmQocHJvZHVjdF9yb3cpCgogICAgICAgICMg0J/RgNC40LfQvdCw0LosIGhhdmVfcXR0eV9wbGFuINCV0YHRgtGM0J/Qu9Cw0L3Qn9Ce0JrQntC70LjRh9C10YHRgtCy0YMgIC0gINCY0YHRgtC40L3QsCDQutC+0LPQtNCwINGB0YPQvNC80LAg0LrQvtC70L7QvdC60LggUXR0eV9wbGFuID4gMAogICAgICAgICMg0J/RgNC40LfQvdCw0LogIGhhdmVfbWFya19wbGFuICLQldGB0YLRjNCf0LvQsNC90JrQntC00L7QstCc0LDRgNC60LjRgNC+0LLQutC4IOKAkyDQmNGB0YLQuNC90LAsINC60L7Qs9C00LAg0LrQvtC70LjRh9C10YHRgtCy0L4g0YHRgtGA0L7QuiDRgtCw0LHQuy4gUlNfZG9jc19iYXJjb2RlcyDRgSDQt9Cw0LTQsNC90L3Ri9C8IGlkX2RvYyDQuCBpc19wbGFuICDQsdC+0LvRjNGI0LUg0L3Rg9C70Y8uCiAgICAgICAgIyDQn9GA0LjQt9C90LDQuiBoYXZlX3plcm9fcGxhbiAi0JXRgdGC0Ywg0YHRgtGA0L7QutC4INGC0L7QstCw0YDQsCDQsiDQtNC+0LrRg9C80LXQvdGC0LUiINCY0YHRgtC40L3QsCwg0LrQvtCz0LTQsCDQtdGB0YLRjCDQt9Cw0L/QvtC70L3QtdC90L3Ri9C1INGB0YLRgNC+0LrQuCDRgtC+0LLQsNGA0L7QsiDQsiDQtNC+0LrRg9C80LXQvdGC0LUKICAgICAgICAjINCf0YDQuNC30L3QsNC6ICLQmtC+0L3RgtGA0L7Qu9C40YDQvtCy0LDRgtGMIiAgLSDQv9GA0LjQt9C90LDQuiDQtNC70Y8g0LTQvtC60YPQvNC10L3RgtCwLCDQvdCw0LTQviDQu9C4INC60L7QvdGC0YDQvtC70LjRgNC+0LLQsNGC0YwKCiAgICAgICAgcXRleHQgPSB1aV9mb3JtX2RhdGEuZ2V0X3F0dHlfc3RyaW5nX2NvdW50X3F1ZXJ5KCkKICAgICAgICByZXMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgeydpZF9kb2MnOiBlbFsna2V5J119KQogICAgICAgIGlmIG5vdCByZXM6CiAgICAgICAgICAgIGhhdmVfcXR0eV9wbGFuID0gRmFsc2UKICAgICAgICAgICAgaGF2ZV96ZXJvX3BsYW4gPSBGYWxzZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGhhdmVfemVyb19wbGFuID0gIHJlc1swXVswXSA+IDAgI9CSINC00L7QutGD0LzQtdC90YLQtSDQtdGB0YLRjCDRgdGC0YDQvtC60LgKICAgICAgICAgICAgaWYgaGF2ZV96ZXJvX3BsYW46CiAgICAgICAgICAgICAgICBoYXZlX3F0dHlfcGxhbiA9IHJlc1swXVsxXSA+IDAgI9CSINC00L7QutGD0LzQtdC90YLQtSDQtdGB0YLRjCDQutC+0LvQstC+INC/0LvQsNC9CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBoYXZlX3F0dHlfcGxhbiA9IEZhbHNlCiAgICAgICAgI9CV0YHRgtGMINC70Lgg0LIg0LTQvtC60YPQvNC10L3RgtC1INC/0LvQsNC9INC/0L4g0LrQvtC00LDQvCDQvNCw0YDQutC40YDQvtCy0LrQuAogICAgICAgIHF0ZXh0ID0gdWlfZm9ybV9kYXRhLmdldF9oYXZlX21hcmtfY29kZXNfcXVlcnkoKQogICAgICAgIHJlcyA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHF0ZXh0LCB7J2lkX2RvYyc6IHN0cihyZXN1bHRzWzBdWydpZF9kb2MnXSksICdpc19wbGFuJzonMSd9KQogICAgICAgIGlmIG5vdCByZXM6CiAgICAgICAgICAgIGhhdmVfbWFya19wbGFuID0gRmFsc2UKCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaGF2ZV9tYXJrX3BsYW4gPSAgcmVzWzBdWzBdID4wCiAgICBlbHNlOgogICAgICAgIGhhdmVfcXR0eV9wbGFuID0gRmFsc2UKICAgICAgICBoYXZlX3plcm9fcGxhbiA9IEZhbHNlCiAgICAgICAgaGF2ZV9tYXJrX3BsYW4gPSBGYWxzZQoKICAgIGhhc2hNYXAucHV0KCdoYXZlX3F0dHlfcGxhbicsc3RyKGhhdmVfcXR0eV9wbGFuKSkKICAgIGhhc2hNYXAucHV0KCdoYXZlX3plcm9fcGxhbicsIHN0cihoYXZlX3plcm9fcGxhbikpCiAgICBoYXNoTWFwLnB1dCgnaGF2ZV9tYXJrX3BsYW4nLHN0cihoYXZlX21hcmtfcGxhbikpCiAgICByZXMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdCgnU0VMRUNUIGNvbnRyb2wgZnJvbSBSU19kb2NzICBXSEVSRSBpZF9kb2MgPSA/JywoZWxbJ2tleSddLCkpCiAgICAj0JXRgdGC0Ywg0LvQuCDQutC+0L3RgtGA0L7Qu9GMINC/0LvQsNC90LAg0LIg0LTQvtC60YPQvNC10L3RgtC1CiAgICBpZiByZXM6CiAgICAgICAgaWYgcmVzWzBdWzBdOgogICAgICAgICAgICBpZiByZXNbMF1bMF0gPT0gJ2ZhbHNlJzoKICAgICAgICAgICAgICAgIGNvbnRyb2wgPSAnRmFsc2UnCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBjb250cm9sID0gJ1RydWUnCgogICAgICAgICAgICAjY29udHJvbCA9IHJlc1swXVswXSAjJ1RydWUnCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY29udHJvbCA9ICdGYWxzZScKICAgIGVsc2U6CiAgICAgICAgY29udHJvbCA9ICAnRmFsc2UnCgogICAgaGFzaE1hcC5wdXQoJ2NvbnRyb2wnLCBjb250cm9sKQogICAgaGFzaE1hcC5wdXQoImRvY19nb29kcyIsIGpzb24uZHVtcHMoZG9jX2RldGFpbF9saXN0KSkKCiAgICByZXR1cm4gaGFzaE1hcAoKCmRlZiBkb2NzX29uX3NlbGVjdChoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBsaXN0ZW5lciA9IGhhc2hNYXAuZ2V0KCJsaXN0ZW5lciIpCgogICAgaWYgbGlzdGVuZXIgPT0gIkNhcmRzQ2xpY2siOgogICAgICAgICMg0J3QsNGF0L7QtNC40LwgSUQg0LTQvtC60YPQvNC10L3RgtCwCiAgICAgICAgY3VycmVudF9zdHIgPSBoYXNoTWFwLmdldCgic2VsZWN0ZWRfY2FyZF9wb3NpdGlvbiIpCiAgICAgICAgamxpc3QgPSBqc29uLmxvYWRzKGhhc2hNYXAuZ2V0KCJkb2NDYXJkcyIpKQogICAgICAgIGN1cnJlbnRfZG9jID0gamxpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddW2ludChjdXJyZW50X3N0cildCgogICAgICAgICMgaWRfZG9jID0gY3VycmVudF9kb2NbJ2tleSddCiAgICAgICAgaGFzaE1hcC5wdXQoJ2lkX2RvYycsIGN1cnJlbnRfZG9jWydrZXknXSkKICAgICAgICBoYXNoTWFwLnB1dCgnZG9jX3R5cGUnLCBjdXJyZW50X2RvY1sndHlwZSddKQogICAgICAgIGhhc2hNYXAucHV0KCdkb2NfbicsIGN1cnJlbnRfZG9jWydudW1iZXInXSkKICAgICAgICBoYXNoTWFwLnB1dCgnZG9jX2RhdGUnLCBjdXJyZW50X2RvY1snZGF0YSddKQogICAgICAgIGhhc2hNYXAucHV0KCd3YXJlaG91c2UnLCBjdXJyZW50X2RvY1snd2FyZWhvdXNlJ10pCiAgICAgICAgaGFzaE1hcC5wdXQoJ2NvdW50cmFnZW50JywgY3VycmVudF9kb2NbJ2NvdW50cmFnZW50J10pCgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLIikKCiAgICBlbGlmIGxpc3RlbmVyID09ICJkb2NfdHlwZV9jbGljayI6CiAgICAgICAgbHMgPSByZWZpbGxfZG9jc19saXN0KGhhc2hNYXAuZ2V0KCdkb2NfdHlwZV9jbGljaycpKQogICAgICAgIGhhc2hNYXAucHV0KCdkb2NDYXJkcycsIGxzKQogICAgICAgIGhhc2hNYXAucHV0KCdTaG93U2NyZWVuJywgJ9CU0L7QutGD0LzQtdC90YLRiycpCiAgICBlbGlmIGxpc3RlbmVyID09ICdMYXlvdXRBY3Rpb24nOgogICAgICAgIGxheW91dF9saXN0ZW5lciA9IGhhc2hNYXAuZ2V0KCdsYXlvdXRfbGlzdGVuZXInKQogICAgICAgICMg0J3QsNGF0L7QtNC40LwgSUQg0LTQvtC60YPQvNC10L3RgtCwCiAgICAgICAgY3VycmVudF9kb2MgPSBqc29uLmxvYWRzKGhhc2hNYXAuZ2V0KCJjYXJkX2RhdGEiKSkKICAgICAgICBkb2MgPSB1aV9nbG9iYWwuUnNfZG9jCiAgICAgICAgZG9jLmlkX2RvYyA9IGN1cnJlbnRfZG9jWydrZXknXQoKICAgICAgICBpZiBsYXlvdXRfbGlzdGVuZXIgPT0gJ0NoZWNrQm94MSc6CiAgICAgICAgICAgIGlmIGN1cnJlbnRfZG9jWydjb21wbGV0ZWQnXSA9PSAnZmFsc2UnOgogICAgICAgICAgICAgICAgZG9jLm1hcmtfdmVyaWZpZWQoZG9jLCAxKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZG9jLm1hcmtfdmVyaWZpZWQoZG9jLCAwKQoKICAgICAgICBlbGlmIGxheW91dF9saXN0ZW5lciA9PSAn0J/QvtC00YLQstC10YDQtNC40YLRjCc6CiAgICAgICAgICAgIGRvYy5tYXJrX3ZlcmlmaWVkKGRvYywgMSkKICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ1Nob3dTY3JlZW4nLCAn0JTQvtC60YPQvNC10L3RgtGLJykKICAgICAgICBlbGlmIGxheW91dF9saXN0ZW5lciA9PSAn0J7Rh9C40YHRgtC40YLRjCDQtNCw0L3QvdGL0LUg0L/QtdGA0LXRgdGH0LXRgtCwJzoKICAgICAgICAgICAgZG9jLmNsZWFyX2JhcmNvZGVfZGF0YShkb2MpCiAgICAgICAgICAgIGhhc2hNYXAucHV0KCd0b2FzdCcsICfQlNCw0L3QvdGL0LUg0L/QtdGA0LXRgdGH0LXRgtCwINC4INC80LDRgNC60LjRgNC+0LLQutC4INC+0YfQuNGJ0LXQvdGLJykKICAgICAgICBlbGlmIGxheW91dF9saXN0ZW5lciA9PSAn0KPQtNCw0LvQuNGC0YwnOgogICAgICAgICAgICBkb2MuZGVsZXRlX2RvYyhkb2MpCiAgICAgICAgICAgIGhhc2hNYXAucHV0KCdTaG93U2NyZWVuJywgJ9CU0L7QutGD0LzQtdC90YLRiycpCiAgICBlbGlmIGxpc3RlbmVyID09ICJidG5fYWRkX2RvYyI6CiAgICAgICAgaGFzaE1hcC5wdXQoJ1Nob3dTY3JlZW4nLCAn0J3QvtCy0YvQuSDQtNC+0LrRg9C80LXQvdGCJykKCiAgICBlbGlmIGxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgIGhhc2hNYXAucHV0KCdTaG93U2NyZWVuJywgJ9Cf0LvQuNGC0LrQuCcpCiAgICAgICAgI2hhc2hNYXAucHV0KCdGaW5pc2hQcm9jZXNzJywgJycpCgogICAgICAgICNoYXNoTWFwLnB1dCgnU2hvd1NjcmVlbicsICfQndC+0LLRi9C5INC00L7QutGD0LzQtdC90YInKQogICAgcmV0dXJuIGhhc2hNYXAKCgpkZWYgZG9jX2RldGFpbHNfbGlzdGVuZXIoaGFzaE1hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgIyDQndCw0YXQvtC00LjQvCBJRCDQtNC+0LrRg9C80LXQvdGC0LAKICAgICMgY3VycmVudF9zdHIgPSBoYXNoTWFwLmdldCgic2VsZWN0ZWRfY2FyZF9wb3NpdGlvbiIpCiAgICAjIGN1cnJlbnRfY2FyZF9saXN0ID0gaGFzaE1hcC5nZXQoImRvY19nb29kcyIpCiAgICAjIGpsID0gamxpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddCiAgICAjIGlmIG5vdCBjdXJyZW50X2NhcmRfbGlzdCA9PSBOb25lOgogICAgIyAgICAgamxpc3QgPSBqc29uLmxvYWRzKGN1cnJlbnRfY2FyZF9saXN0KQogICAgIyAgICAgY3VycmVudF9lbGVtID0gamxpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddW2ludChjdXJyZW50X3N0ciktMV0KICAgICMgZWxzZToKICAgICMgICAgIGN1cnJlbnRfZWxlbSA9IE5vbmUKICAgIGxpc3RlbmVyID0gaGFzaE1hcC5nZXQoJ2xpc3RlbmVyJykKICAgIGlmIGxpc3RlbmVyID09ICJDYXJkc0NsaWNrIjoKCiAgICAgICAgIyDQndCw0YXQvtC00LjQvCBJRCDQtNC+0LrRg9C80LXQvdGC0LAKICAgICAgICBjdXJyZW50X3N0ciA9IGhhc2hNYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX3Bvc2l0aW9uIikKICAgICAgICBqbGlzdCA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoImRvY19nb29kcyIpKQogICAgICAgIGN1cnJlbnRfZWxlbSA9IGpsaXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXVtpbnQoY3VycmVudF9zdHIpXQogICAgICAgIGhhc2hNYXAucHV0KCJEb2NfZGF0YSIsCiAgICAgICAgICAgICAgICAgICAgaGFzaE1hcC5nZXQoJ2RvY190eXBlJykgKyAnIOKElicgKyBoYXNoTWFwLmdldCgnZG9jX24nKSArCiAgICAgICAgICAgICAgICAgICAgJyDQvtGCJyArIGhhc2hNYXAuZ2V0KCdkb2NfZGF0ZScpKQogICAgICAgIGhhc2hNYXAucHV0KCJHb29kIiwgY3VycmVudF9lbGVtWydnb29kX25hbWUnXSkKICAgICAgICBoYXNoTWFwLnB1dCgicXR0eV9wbGFuIiwgc3RyKGN1cnJlbnRfZWxlbVsncXR0eV9wbGFuJ10pKQogICAgICAgIGlmIG5vdCBjdXJyZW50X2VsZW1bJ3F0dHknXTogIyBvciBmbG9hdChjdXJyZW50X2VsZW1bJ3F0dHknXSkgPT0gMDoKICAgICAgICAgICAgaGFzaE1hcC5wdXQoInF0dHkiLCAnJykKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBmbG9hdChjdXJyZW50X2VsZW1bJ3F0dHknXSkgPT0gMDoKICAgICAgICAgICAgICAgIGhhc2hNYXAucHV0KCJxdHR5IiwgJycpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBoYXNoTWFwLnB1dCgicXR0eSIsIHN0cihjdXJyZW50X2VsZW1bJ3F0dHknXSkpCiAgICAgICAgaGFzaE1hcC5wdXQoJ2tleScsIGN1cnJlbnRfZWxlbVsna2V5J10pCiAgICAgICAgaGFzaE1hcC5wdXQoJ3ByaWNlJywgY3VycmVudF9lbGVtWydwcmljZSddKQogICAgICAgIGhhc2hNYXAucHV0KCdwcmljZV90eXBlJywgY3VycmVudF9lbGVtWydwcmljZV9uYW1lJ10pCiAgICAgICAgIyDQpNC+0YDQvNC40YDRg9C10Lwg0YLQsNCx0LvQuNGG0YMgUVIg0LrQvtC00L7Qsi0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIHF1ZXJ5X3RleHQgPSB1aV9mb3JtX2RhdGEuZ2V0X2RvY19iYXJjb2RlX3F1ZXJ5KCkKICAgICAgICBhcmdzID0gZGljdChpZF9nb29kPWN1cnJlbnRfZWxlbVsnaWRfZ29vZCddLCBpZF9wcm9wZXJ0eT1jdXJyZW50X2VsZW1bJ2lkX3Byb3BlcnRpZXMnXSwKICAgICAgICAgICAgICAgICAgICBpZF9zZXJpZXM9Y3VycmVudF9lbGVtWydpZF9zZXJpZXMnXSwgaWRfdW5pdD1jdXJyZW50X2VsZW1bJ2lkX3VuaXQnXSwgaWRfZG9jPWhhc2hNYXAuZ2V0KCdpZF9kb2MnKSkKCiAgICAgICAgY2FyZHMgPSB1aV9mb3JtX2RhdGEuZ2V0X2JhcmNvZGVfY2FyZCgpCiAgICAgICAgcmVzID0gdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXVlcnlfdGV4dCwgYXJncywgVHJ1ZSkKICAgICAgICAjINCk0L7RgNC80LjRgNGD0LXQvCDRgdC/0LjRgdC+0Log0LrQsNGA0YLQvtGH0LXQuiDQsdCw0YDQutC+0LTQvtCyCiAgICAgICAgY2FyZHNbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddID0gW10KICAgICAgICBmb3IgZWwgaW4gcmVzOgogICAgICAgICAgICAjIGJhcmNvZGVfZGF0YSA9IHVpX2JhcmNvZGVzLmdldF9ndGluX3NlcmlhbF9mcm9tX2RhdGFtYXRyaXgoZWxbJ2JhcmNvZGUnXSkKICAgICAgICAgICAgaWYgZWxbJ2FwcHJvdmVkJ10gPT0gJ1RydWUnIG9yIGVsWydhcHByb3ZlZCddID09ICcxJyBvciBlbFsnYXBwcm92ZWQnXSA9PSAndHJ1ZSc6CiAgICAgICAgICAgICAgICBwaWN0dXJlID0gJyNmMDBjJwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcGljdHVyZSA9ICcnCiAgICAgICAgICAgIHJvdyA9IHsKICAgICAgICAgICAgICAgICdiYXJjb2RlJzogZWxbJ21hcmtfY29kZSddLAogICAgICAgICAgICAgICAgJ3BpY3R1cmUnOiBwaWN0dXJlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FyZHNbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddLmFwcGVuZChyb3cpCiAgICAgICAgaGFzaE1hcC5wdXQoImJhcmNvZGVfY2FyZHMiLCBqc29uLmR1bXBzKGNhcmRzKSkKCiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0KLQvtCy0LDRgCIpCgogICAgZWxpZiBsaXN0ZW5lciA9PSAiQkFDS19CVVRUT04iOgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YLRiyIpCiAgICBlbGlmIGxpc3RlbmVyID09ICJidG5fYmFyY29kZXMiOgoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd0RpYWxvZyIsICLQktCy0LXRgdGC0LjQqNGC0YDQuNGF0LrQvtC0IikKCgogICAgZWxpZiBsaXN0ZW5lciA9PSAnYmFyY29kZSc6CiAgICAgICAgZG9jID0gdWlfZ2xvYmFsLlJzX2RvYwogICAgICAgIGRvYy5pZF9kb2MgPSBoYXNoTWFwLmdldCgnaWRfZG9jJykKICAgICAgICBiYXJjb2RlID0gaGFzaE1hcC5nZXQoJ2JhcmNvZGVfY2FtZXJhJykKICAgICAgICBoYXZlX3F0dHlfcGxhbiA9IGhhc2hNYXAuZ2V0KCdoYXZlX3F0dHlfcGxhbicpCiAgICAgICAgaGF2ZV96ZXJvX3BsYW4gPSBoYXNoTWFwLmdldCgnaGF2ZV96ZXJvX3BsYW4nKQogICAgICAgIGhhdmVfbWFya19wbGFuID0gaGFzaE1hcC5nZXQoJ2hhdmVfbWFya19wbGFuJykKICAgICAgICBjb250cm9sID0gaGFzaE1hcC5nZXQoJ2NvbnRyb2wnKQogICAgICAgIHJlcyA9IGRvYy5wcm9jZXNzX3RoZV9iYXJjb2RlKGRvYywgYmFyY29kZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgZXZhbChoYXZlX3F0dHlfcGxhbiksIGV2YWwoaGF2ZV96ZXJvX3BsYW4pLCBldmFsKGNvbnRyb2wpLCBldmFsKGhhdmVfbWFya19wbGFuKSkKICAgICAgICBpZiByZXMgPT0gTm9uZToKICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ3NjYW5uZWRfYmFyY29kZScsIGJhcmNvZGUpCiAgICAgICAgICAgICNzdUNsYXNzLnVyb3ZvX3NldF9sb2NrX3RyaWdnZXIoVHJ1ZSkKICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ1Nob3dTY3JlZW4nLCAn0J7RiNC40LHQutCwINGB0LrQsNC90LXRgNCwJykKICAgICAgICAgICAgIyBoYXNoTWFwLnB1dCgndG9hc3QnLAogICAgICAgICAgICAjICAgICAgICAgICAgICfQqNGC0YDQuNGFINC60L7QtCDQvdC1INC30LDRgNC10LPQuNGB0YLRgNC40YDQvtCy0LDQvSDQsiDQsdCw0LfQtSDQtNCw0L3QvdGL0YUuINCf0YDQvtCy0LXRgNGM0YLQtSDRgtC+0LLQsNGAINC40LvQuCDQstGL0L/QvtC70L3QuNGC0LUg0L7QsdC80LXQvSDQtNCw0L3QvdGL0LzQuCcpCiAgICAgICAgZWxpZiByZXNbJ0Vycm9yJ106CiAgICAgICAgICAgIGlmIHJlc1snRXJyb3InXSA9PSAnQWxyZWFkeVNjYW5uZWQnOgoKICAgICAgICAgICAgICAgIGhhc2hNYXAucHV0KCdiYXJjb2RlJywganNvbi5kdW1wcyh7J2JhcmNvZGUnOiByZXNbJ0JhcmNvZGUnXSwgJ2RvY19pbmZvJzogcmVzWydkb2NfaW5mbyddfSkpCiAgICAgICAgICAgICAgICBoYXNoTWFwLnB1dCgnU2hvd1NjcmVlbicsICfQo9C00LDQu9C10L3QuNC1INGI0YLRgNC40YXQutC+0LTQsCcpCiAgICAgICAgICAgIGVsaWYgcmVzWydFcnJvciddID09ICdRdWFudGl0eVBsYW5SZWFjaGVkJzoKICAgICAgICAgICAgICAgIGhhc2hNYXAucHV0KCd0b2FzdCcsIHJlc1snRGVzY3InXSkKICAgICAgICAgICAgZWxpZiByZXNbJ0Vycm9yJ10gPT0gJ1plcm9fcGxhbl9lcnJvcic6CiAgICAgICAgICAgICAgICBoYXNoTWFwLnB1dCgndG9hc3QnLCByZXNbJ0Rlc2NyJ10pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBoYXNoTWFwLnB1dCgndG9hc3QnLCByZXNbJ0Rlc2NyJ10pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ3RvYXN0JywgJ9Ci0L7QstCw0YAg0LTQvtCx0LDQstC70LXQvSDQsiDQtNC+0LrRg9C80LXQvdGCJykKICAgICAgICAjIGhhc2hNYXAucHV0KCd0b2FzdCcsJzEnKQoKICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2J0bl9kb2NfbWFya192ZXJpZmllZCc6CiAgICAgICAgZG9jID0gdWlfZ2xvYmFsLlJzX2RvYwogICAgICAgIGRvYy5pZF9kb2MgPSBoYXNoTWFwLmdldCgnaWRfZG9jJykKICAgICAgICBkb2MubWFya192ZXJpZmllZChkb2MsIDEpCiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgtGLIikKCiAgICBlbGlmIGxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YLRiyIpCgogICAgcmV0dXJuIGhhc2hNYXAKCgpkZWYgZGVsZXRlX2JhcmNvZGVfc2NyZWVuX3N0YXJ0KGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgICMg0J3QsNGF0L7QtNC40LwgSUQg0LTQvtC60YPQvNC10L3RgtCwCiAgICBiYXJjb2RlX2RhdGEgPSBqc29uLmxvYWRzKGhhc2hNYXAuZ2V0KCdiYXJjb2RlJykpWydiYXJjb2RlJ10KICAgICMg0J3QsNC50LTQtdC8INC90YPQttC90YvQtSDQv9C+0LvRjyDQt9Cw0L/RgNC+0YHQvtC8INC6INCx0LDQt9C1CiAgICBxdGV4dCA9IHVpX2Zvcm1fZGF0YS5nZXRfbWFya2NvZGVfcXVlcnkoKQogICAgYXJncyA9IHsnaWRfZG9jJzogaGFzaE1hcC5nZXQoJ2lkX2RvYycpLAogICAgICAgICAgICAnR1RJTic6IGJhcmNvZGVfZGF0YVsnR1RJTiddLCAnU2VyaWVzJzogYmFyY29kZV9kYXRhWydTRVJJQUwnXX0KCiAgICByZXMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCwgYXJncywgVHJ1ZSkKCiAgICBoYXNoTWFwLnB1dCgnY3VycmVudFN0cicsIGpzb24uZHVtcHMocmVzWzBdKSkKICAgIGhhc2hNYXAucHV0KCJDdXJTdHIiLCBzdHIocmVzWzBdWydDdXJTdHInXSkpCiAgICBoYXNoTWFwLnB1dCgiZ29vZCIsIHJlc1swXVsnZ29vZF9uYW1lJ10pCiAgICBoYXNoTWFwLnB1dCgiJ2NvZGVfYXJ0JyIsIHJlc1swXVsnZ29vZF9jb2RlJ10pCiAgICBoYXNoTWFwLnB1dCgidW5pdF9uYW1lIiwgc3RyKHJlc1swXVsndW5pdCddKSkKICAgIGhhc2hNYXAucHV0KCdiYXJjb2RlX3ZhbHVlJywgJzAxJyArIGJhcmNvZGVfZGF0YVsnR1RJTiddICsgJzIxJyArIGJhcmNvZGVfZGF0YVsnU0VSSUFMJ10pCgogICAgcmV0dXJuIGhhc2hNYXAKCgpkZWYgZGVsZXRlX2JhcmNvZGVfc2NyZWVuX2NsaWNrKGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgIGxpc3RlbmVyID0gaGFzaE1hcC5nZXQoImxpc3RlbmVyIikKICAgIGlmIGxpc3RlbmVyID09ICJidG5fYmFyY29kZV9jYW5jZWwiOgoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCgogICAgZWxpZiBsaXN0ZW5lciA9PSAiYnRuX2JhcmNvZGVfZGVsZXRlIjoKICAgICAgICBkb2MgPSB1aV9nbG9iYWwuUnNfZG9jCiAgICAgICAgZG9jLmlkX2RvYyA9IGhhc2hNYXAuZ2V0KCdpZF9kb2MnKQogICAgICAgIGN1cnJlbnRfYmFyY29kZV9zdHIgPSBpbnQoaGFzaE1hcC5nZXQoIkN1clN0ciIpKQogICAgICAgIGVsID0ganNvbi5sb2FkcyhoYXNoTWFwLmdldCgnY3VycmVudFN0cicpKQoKICAgICAgICAjIGRvYy5pZF9zdHIgPSBpbnQoY3VycmVudF9lbGVtWydrZXknXSkKICAgICAgICAjIGRvYy5xdHR5ID0gZmxvYXQoaGFzaE1hcC5nZXQoJ3F0dHknKSkKICAgICAgICAjIGRvYy51cGRhdGVfZG9jX3N0cihkb2MsIGhhc2hNYXAuZ2V0KCdwcmljZScpKQogICAgICAgIHF1ZXJ5X3RleHQgPSAnVXBkYXRlICBSU19kb2NzX2JhcmNvZGVzIFNFVCBhcHByb3ZlZD0/IFdoZXJlIGlkPT8nCiAgICAgICAgdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQocXVlcnlfdGV4dCwgKCcwJywgY3VycmVudF9iYXJjb2RlX3N0cikpCiAgICAgICAgZG9jLnVwZGF0ZV9kb2NfdGFibGVfZGF0YShkb2MsIGVsLCAtMSkKCiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsiKQoKICAgIGVsaWYgbGlzdGVuZXIgPT0gIkJBQ0tfQlVUVE9OIjoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCiAgICBlbGlmIGxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLIikKCiAgICByZXR1cm4gaGFzaE1hcAoKCmRlZiBlbGVtX29uX3N0YXJ0KGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgIGhhc2hNYXAucHV0KCdtbV9sb2NhbCcsJycpCiAgICByZXR1cm4gaGFzaE1hcAoKZGVmIGVsZW1fb25fY2xpY2soaGFzaE1hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgbGlzdGVuZXIgPSBoYXNoTWFwLmdldCgibGlzdGVuZXIiKQogICAgaWYgbGlzdGVuZXIgPT0gImJ0bl9vayI6CiAgICAgICAgIyDQv9C+0LvRg9GH0LjQvCDRgtC10LrRg9GJ0YPRjiDRgdGC0YDQvtC60YMg0LTQvtC60YPQvNC10L3RgtCwCiAgICAgICAgY3VycmVudF9zdHIgPSBoYXNoTWFwLmdldCgic2VsZWN0ZWRfY2FyZF9wb3NpdGlvbiIpCiAgICAgICAgamxpc3QgPSBqc29uLmxvYWRzKGhhc2hNYXAuZ2V0KCJkb2NfZ29vZHMiKSkKICAgICAgICBjdXJyZW50X2VsZW0gPSBqbGlzdFsnY3VzdG9tY2FyZHMnXVsnY2FyZHNkYXRhJ11baW50KGN1cnJlbnRfc3RyKV0KICAgICAgICBrZXkgPSBpbnQoY3VycmVudF9lbGVtWydrZXknXSkKICAgICAgICAjIC4uLiDQuCDQt9Cw0L/QuNGI0LXQvCDQtdC1INCyINCx0LDQt9GDCgogICAgICAgIGRvYyA9IHVpX2dsb2JhbC5Sc19kb2MKICAgICAgICBkb2MuaWRfc3RyID0gaW50KGN1cnJlbnRfZWxlbVsna2V5J10pCiAgICAgICAgcXR0eSA9IGhhc2hNYXAuZ2V0KCdxdHR5JykKICAgICAgICBkb2MucXR0eSA9IGZsb2F0KHF0dHkpIGlmIHF0dHkgZWxzZSAwCiAgICAgICAgZG9jLnVwZGF0ZV9kb2Nfc3RyKGRvYywgaGFzaE1hcC5nZXQoJ3ByaWNlJykpCgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLIikKICAgIGVsaWYgbGlzdGVuZXIgPT0gImJ0bl9jYW5jZWwiOgoKICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsICLQlNC+0LrRg9C80LXQvdGCINGC0L7QstCw0YDRiyIpCiAgICBlbGlmIGxpc3RlbmVyID09ICJCQUNLX0JVVFRPTiI6CiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsiKQogICAgZWxpZiBsaXN0ZW5lciA9PSAiIjoKICAgICAgICBoYXNoTWFwLnB1dCgicXR0eSIsIHN0cihmbG9hdChoYXNoTWFwLmdldCgncXR0eScpKSkpCiAgICBlbGlmIGxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLIikKCiAgICBlbGlmIGxpc3RlbmVyID09ICJwaG90byI6CgogICAgICAgICMg0JzQvtC20L3QviDQstC+0L7QsdGJ0LUg0Y3RgtC+0LPQviDQvdC1INC00LXQu9Cw0YLRjC3QvtGB0YLQsNCy0LvRj9GC0Ywg0LrQsNC6INC10YHRgtGMLiDQrdGC0L4g0LTQu9GPINC/0YDQuNC80LXRgNCwLgogICAgICAgIGltYWdlX2ZpbGUgPSBzdHIoaGFzaE1hcC5nZXQoInBob3RvX3BhdGgiKSkgICMgItC/0LXRgNC10LzQtdC90L3QsNGPIisiX3BhdGgiIC0g0YHRjtC00LAg0L/QvtC80LXRidCw0LXRgtGB0Y8g0L/Rg9GC0Ywg0Log0L/QvtC70YPRh9C10L3QvdC+0Lkg0YTQvtGC0L7Qs9GA0LDRhNC40LgKCiAgICAgICAgaW1hZ2UgPSBJbWFnZS5vcGVuKGltYWdlX2ZpbGUpCgogICAgICAgICMg0YHRgNCw0LfRgyDRgdC00LXQu9Cw0LXQvCDRhNC+0YLQutGDIC0g0LrQstCw0LTRgNCw0YLQvdC+0LkgLSDRjdGC0L4g0L/RgNC+0YHRgtC+0Lkg0LLQsNGA0LjQsNC90YIuINCc0L7QttC90L4g0YHQtNC10LvQsNGC0Ywg0L3QsNC/0YDQuNC80LXRgCDQvtGC0LTQtdC70YzQviDQvNC40L3QuNCw0YLRjtGA0Ysg0LTQu9GPINGB0L/QuNGB0LrQsCwg0Y3RgtC+INC90LXQvNC90L7Qs9C+INGB0LvQvtC20L3QtdC1CiAgICAgICAgaW0gPSBpbWFnZS5yZXNpemUoKDUwMCwgNTAwKSkKICAgICAgICBpbS5zYXZlKGltYWdlX2ZpbGUpCgogICAgICAgIGpwaG90b2FyciA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoInBob3RvR2FsbGVyeSIpKQogICAgICAgIGhhc2hNYXAucHV0KCJwaG90b0dhbGxlcnkiLCBqc29uLmR1bXBzKGpwaG90b2FycikpCiAgICAgICAgIyBoYXNoTWFwLnB1dCgidG9hc3QiLGpzb24uZHVtcHMoanBob3RvYXJyKSkKCiAgICBlbGlmIGxpc3RlbmVyID09ICJnYWxsZXJ5X2NoYW5nZSI6ICAjINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDQvNC+0LbQtdGCINGD0LTQsNC70LjRgtGMINGE0L7RgtC+INC40Lcg0LPQsNC70LXRgNC10LguINCd0L7QstGL0Lkg0LzQsNGB0YHQuNCyINC90LDQtNC+INC/0L7QvNC10YHRgtC40YLRjCDQuiDQtNC+0LrRg9C80LXQvdGC0YMKCiAgICAgICAgaWYgaGFzaE1hcC5jb250YWluc0tleSgicGhvdG9HYWxsZXJ5Iik6ICAjINGN0YLQuCAyINC+0LHRgNCw0LHQvtGC0YfQuNC60LAgLSDQsNC90LDQu9C+0LPQuNGH0L3Ri9C1LCDQv9GA0L7RgdGC0L4g0LTQu9GPINGA0LDQt9C90YvRhSDRgdC+0LHRi9GC0LjQuQogICAgICAgICAgICBqcGhvdG9hcnIgPSBqc29uLmxvYWRzKGhhc2hNYXAuZ2V0KCJwaG90b0dhbGxlcnkiKSkKICAgICAgICAgICAgaGFzaE1hcC5wdXQoInBob3RvR2FsbGVyeSIsIGpzb24uZHVtcHMoanBob3RvYXJyKSkKICAgICAgICAgICAgIyBoYXNoTWFwLnB1dCgidG9hc3QiLCIjMiIranNvbi5kdW1wcyhqcGhvdG9hcnIpKQoKICAgIHJldHVybiBoYXNoTWFwCgoKZGVmIGdvb2RzX29uX2NsaWNrKGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgIGxpc3RlbmVyID0gaGFzaE1hcC5nZXQoImxpc3RlbmVyIikKCiAgICBpZiBsaXN0ZW5lciA9PSAiQ2FyZHNDbGljayI6CiAgICAgICAgIyDQndCw0YXQvtC00LjQvCBJRCDQtNC+0LrRg9C80LXQvdGC0LAKICAgICAgICBjdXJyZW50X3N0ciA9IGhhc2hNYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX3Bvc2l0aW9uIikKICAgICAgICBqbGlzdCA9IGpzb24ubG9hZHMoaGFzaE1hcC5nZXQoImdvb2RzX2NhcmRzIikpCiAgICAgICAgY3VycmVudF9nb29kID0gamxpc3RbJ2N1c3RvbWNhcmRzJ11bJ2NhcmRzZGF0YSddW2ludChjdXJyZW50X3N0cildCgogICAgICAgICMgaWRfZG9jID0gY3VycmVudF9kb2NbJ2tleSddCiAgICAgICAgaGFzaE1hcC5wdXQoJ2lkX2dvb2QnLCBjdXJyZW50X2dvb2RbJ2tleSddKQogICAgICAgIGhhc2hNYXAucHV0KCduYW1lJywgY3VycmVudF9nb29kWyduYW1lJ10pCiAgICAgICAgaGFzaE1hcC5wdXQoJ2NvZGUnLCBjdXJyZW50X2dvb2RbJ2NvZGUnXSkKICAgICAgICBoYXNoTWFwLnB1dCgndHlwZV9uYW1lJywgY3VycmVudF9nb29kWyd0eXBlX25hbWUnXSkKICAgICAgICAjICAgICAgICBoYXNoTWFwLnB1dCgndW5pdF9uYW1lJywgY3VycmVudF9nb29kWyd1bml0X25hbWUnXSkKCiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0KbQtdC90Ysg0YLQvtCy0LDRgNCwIikKCiAgICBlbGlmIGxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgoKICAgICAgICBoYXNoTWFwLnB1dCgnRmluaXNoUHJvY2VzcycsICcnKQoKICAgIHJldHVybiBoYXNoTWFwCgoKZGVmIHByaWNlX29uX3N0YXJ0KGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgIGlkX2dvb2QgPSBoYXNoTWFwLmdldCgnaWRfZ29vZCcpCiAgICAjINCk0L7RgNC80LjRgNGD0LXQvCDRgtCw0LHQu9C40YbRgyDQutCw0YDRgtC+0YfQtdC6INC4INC30LDQv9GA0L7RgSDQuiDQsdCw0LfQtQogICAgZ29vZHNfcHJpY2VfbGlzdCA9IHVpX2Zvcm1fZGF0YS5nZXRfcHJpY2VfY2FyZCgpCiAgICBnb29kc19wcmljZV9saXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXSA9IFtdCgogICAgcXVlcnlfdGV4dCA9IHVpX2Zvcm1fZGF0YS5nZXRfcHJpY2VfcXVlcnkoKQoKICAgIHJlc3VsdHMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV90ZXh0LCAoaWRfZ29vZCwpKQogICAgZm9yIHJlY29yZCBpbiByZXN1bHRzOgogICAgICAgIHByb2R1Y3Rfcm93ID0gewogICAgICAgICAgICAna2V5Jzogc3RyKHJlY29yZFswXSksCiAgICAgICAgICAgICdnb29kX25hbWUnOiBzdHIocmVjb3JkWzNdKSwKICAgICAgICAgICAgIyAnaWRfcHJvcGVydGllcyc6IHN0cihyZWNvcmRbM10pLAogICAgICAgICAgICAncHJvcGVydGllc19uYW1lJzogc3RyKHJlY29yZFs1XSksCiAgICAgICAgICAgICMgJ2lkX3Nlcmllcyc6IHN0cihyZWNvcmRbNV0pLAogICAgICAgICAgICAnc2VyaWVzX25hbWUnOiBzdHIocmVjb3JkWzddKX0KICAgIHJldHVybiBoYXNoTWFwCgoKZGVmIHByaWNlX29uX2NsaWNrKGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgIGlmIGhhc2hNYXAuZ2V0KCdsaXN0ZW5lcicpID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCi0L7QstCw0YDRiyDRgdC/0LjRgdC+0LoiKQogICAgcmV0dXJuIGhhc2hNYXAKCgpkZWYgbmV3X2RvY19vbl9zdGFydChoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBpZiBoYXNoTWFwLmdldCgnZG9jX3R5cGVfc2VsZWN0JykgPT0gTm9uZToKICAgICAgICAjINCX0LDQv9C+0LvQvdC40Lwg0L/QvtC70LUg0YTQuNC70YzRgtGA0LAg0L/QviDQstC40LTRgyDQtNC+0LrRg9C80LXQvdGC0L7QsgogICAgICAgIHJlc3VsdCA9IHVpX2dsb2JhbC5nZXRfcXVlcnlfcmVzdWx0KHVpX2Zvcm1fZGF0YS5nZXRfZG9jX3R5cGVfcXVlcnkoKSkKICAgICAgICBkb2NfdHlwZV9saXN0ID0gJ9CS0YHQtScKICAgICAgICBmb3IgcmVjb3JkIGluIHJlc3VsdDoKICAgICAgICAgICAgZG9jX3R5cGVfbGlzdCA9IGRvY190eXBlX2xpc3QgKyAoJzsnICsgcmVjb3JkWzBdKQogICAgICAgIGhhc2hNYXAucHV0KCdkb2NfdHlwZV9zZWxlY3QnLCBkb2NfdHlwZV9saXN0KQoKICAgIGlmIGhhc2hNYXAuZ2V0KCdjb3VudHJhZ2VudCcpID09IE5vbmU6CiAgICAgICAgZmxkX2NvdW50cmFnZW50ID0gdWlfZ2xvYmFsLmdldF9uYW1lX2xpc3QoJ1JTX2NvdW50cmFnZW50cycpCiAgICAgICAgaGFzaE1hcC5wdXQoJ2NvdW50cmFnZW50JywgZmxkX2NvdW50cmFnZW50KQoKICAgIGlmIGhhc2hNYXAuZ2V0KCd3YXJlaG91c2UnKSA9PSBOb25lOgogICAgICAgIGZsZF9jb3VudHJhZ2VudCA9IHVpX2dsb2JhbC5nZXRfbmFtZV9saXN0KCdSU193YXJlaG91c2VzJykKICAgICAgICBoYXNoTWFwLnB1dCgnd2FyZWhvdXNlJywgZmxkX2NvdW50cmFnZW50KQoKICAgIGlmIG5vdCBoYXNoTWFwLmNvbnRhaW5zS2V5KCdkb2NfZGF0ZScpOgogICAgICAgIGhhc2hNYXAucHV0KCdkb2NfZGF0ZScsICcwMS4wMS4yMDIyJykKCiAgICByZXR1cm4gaGFzaE1hcAoKCmRlZiBuZXdfZG9jX29uX3NlbGVjdChoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBsaXN0ZW5lciA9IGhhc2hNYXAuZ2V0KCJsaXN0ZW5lciIpCiAgICB0eXBlID0gaGFzaE1hcC5nZXQoJ2RvY190eXBlX2NsaWNrJykKICAgIGlmIG5vdCB0eXBlOgogICAgICAgIHR5cGUgPSAn0J/RgNC40YXQvtC0JwogICAgZmxkX251bWJlciA9IGhhc2hNYXAuZ2V0KCdmbGRfbnVtYmVyJykKCiAgICBpZiBsaXN0ZW5lciA9PSAiYnRuX29rIjoKICAgICAgICBpZiBub3QgZmxkX251bWJlcjoKCiAgICAgICAgICAgIGlkID0gdWlfZ2xvYmFsLlJzX2RvYy5nZXRfbmV3X2lkKDEpCiAgICAgICAgICAgICNpZCA9IChmJ3tpZDowNH0nKQogICAgICAgICAgICAjaWQgPSAiezA6MD40fSIuZm9ybWF0KGlkKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlkID0gZmxkX251bWJlcgoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHVpX2dsb2JhbC5Sc19kb2MuYWRkKCcwMScsIChpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCwgI2hhc2hNYXAuZ2V0KCdmbGRfbnVtYmVyJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hNYXAuZ2V0KCdmbGRfZGF0YScpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWlfZ2xvYmFsLmdldF9ieV9uYW1lKGhhc2hNYXAuZ2V0KCdmbGRfY291bnRyYWdlbnQnKSwgJ1JTX2NvdW50cmFnZW50cycpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWlfZ2xvYmFsLmdldF9ieV9uYW1lKGhhc2hNYXAuZ2V0KCdkb2Nfd2FyZWhvdXNlJyksICdSU193YXJlaG91c2VzJykpKQogICAgICAgICAgICBoYXNoTWFwLnB1dCgnU2hvd1NjcmVlbicsICfQlNC+0LrRg9C80LXQvdGC0YsnKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgaGFzaE1hcC5wdXQoJ3RvYXN0JywgJ9Cd0L7QvNC10YAg0LTQvtC60YPQvNC10L3RgtCwINC90LXRg9C90LjQutCw0LvQtdC9IScpCgoKICAgIGVsaWYgbGlzdGVuZXIgPT0gJ2J0bl9jYW5jZWwnOgogICAgICAgIGhhc2hNYXAucHV0KCdTaG93U2NyZWVuJywgJ9CU0L7QutGD0LzQtdC90YLRiycpCiAgICBlbGlmIGxpc3RlbmVyID09ICdmbGRfZGF0YSc6CiAgICAgICAgaGFzaE1hcC5wdXQoJ2RvY19kYXRlJywgaGFzaE1hcC5nZXQoJ2ZsZF9kYXRhJykpCiAgICBlbGlmIGxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YLRiyIpCiAgICByZXR1cm4gaGFzaE1hcAoKCmRlZiBkb2NfYmFyY29kZXNfb25fc3RhcnQoaGFzaE1hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgZG9jX2RldGFpbF9saXN0ID0gdWlfZm9ybV9kYXRhLmdldF9iYXJjb2RlX2NhcmQoKQogICAgcXVlcnlfdGV4dCA9IHVpX2Zvcm1fZGF0YS5nZXRfYmFyY29kZV9xdWVyeSgpCiAgICBpZF9kb2MgPSBoYXNoTWFwLmdldCgnaWRfZG9jJykKICAgIHJlc3VsdHMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChxdWVyeV90ZXh0LCAoaWRfZG9jLCkpCgogICAgZm9yIHJlY29yZCBpbiByZXN1bHRzOgogICAgICAgIHByb2R1Y3Rfcm93ID0gewogICAgICAgICAgICAna2V5Jzogc3RyKHJlY29yZFswXSksCiAgICAgICAgICAgICdiYXJjb2RlX3ZhbHVlJzogc3RyKHJlY29yZFszXSksCiAgICAgICAgICAgICdhcHByb3ZlZCc6IHN0cihyZWNvcmRbNF0pCgogICAgICAgIH0KCiAgICAgICAgZG9jX2RldGFpbF9saXN0WydjdXN0b21jYXJkcyddWydjYXJkc2RhdGEnXS5hcHBlbmQocHJvZHVjdF9yb3cpCgogICAgaGFzaE1hcC5wdXQoImJhcmNfY2FyZHMiLCBqc29uLmR1bXBzKGRvY19kZXRhaWxfbGlzdCkpCgogICAgcmV0dXJuIGhhc2hNYXAKCgpkZWYgZG9jX2JhcmNvZGVzX2xpc3RlbmVyKGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgIGlmIGhhc2hNYXAuZ2V0KCdsaXN0ZW5lcicpID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwgItCU0L7QutGD0LzQtdC90YIg0YLQvtCy0LDRgNGLIikKICAgIHJldHVybiBoYXNoTWFwCgoKZGVmIGJhcmNvZGVfZXJyb3Jfc2NyZWVuX2xpc3RlbmVyKGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKICAgIGlmIGhhc2hNYXAuZ2V0KCdsaXN0ZW5lcicpID09ICdPTl9CQUNLX1BSRVNTRUQnOgogICAgICAgICNzdUNsYXNzLnVyb3ZvX3NldF9sb2NrX3RyaWdnZXIoRmFsc2UpCiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsiKQogICAgZWxpZiBoYXNoTWFwLmdldCgnbGlzdGVuZXInKSA9PSAnYnRuX2NvbnRpbnVlX3NjYW4nOgogICAgICAgICNzdUNsYXNzLnVyb3ZvX3NldF9sb2NrX3RyaWdnZXIoRmFsc2UpCiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JTQvtC60YPQvNC10L3RgiDRgtC+0LLQsNGA0YsiKQogICAgcmV0dXJuIGhhc2hNYXAKCmRlZiB0aWxlc19vbl9zdGFydChoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICBzbWFsbF90aWxlID0gdWlfZm9ybV9kYXRhLmdldF9kb2NfdGlsZXMoKQogICAgcXRleHQgPSB1aV9mb3JtX2RhdGEuZ2V0X2RvY3Nfc3RhdF9xdWVyeSgpCiAgICByZXMgPSB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChxdGV4dCxOb25lLFRydWUpCgogICAgeCA9IHsndGlsZXMnOiBbW11dLCAiYmFja2dyb3VuZF9jb2xvciI6ICIjZjVmNWY1In0KCiAgICAjeFsndGlsZXMnOlswXVswXV09MQogICAgcm93cyA9IDEKICAgIGNvbHVtbnMgPSAxCiAgICBmb3IgZWwgaW4gcmVzOgogICAgICAgIGlmIGNvbHVtbnMgJSAzID09IDA6CiAgICAgICAgICAgIHJvd3MgKz0xCiAgICAgICAgICAgIGNvbHVtbnMgPSAwCiAgICAgICAgICAgIHhbJ3RpbGVzJ10uYXBwZW5kKFtdKQogICAgICAgIGNvbHVtbnMgKz0xCgogICAgICAgIHRpbGUgPSB7CgogICAgICAgICAgICAgICAgImxheW91dCI6IHNtYWxsX3RpbGUsCiAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICJkb2NOYW1lIjogZWxbJ2RvY1R5cGUnXSwKICAgICAgICAgICAgICAgICdRdHR5T2ZEb2NzJzogZWxbJ2NvdW50J10sCiAgICAgICAgICAgICAgICAnUXR0eU9mRG9jc0luY29tcGxldGVkJzplbFsnY291bnQnXSAtIGVsWyd2ZXJpZmllZCddCgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICJjb2xvciI6ICIjMjZhNjlhIiwKICAgICAgICAgICAgICAgICJzdGFydF9zY3JlZW4iOiAi0JTQvtC60YPQvNC10L3RgtGLIiwKCiAgICAgICAgICAgICAgICAic3RhcnRfcHJvY2VzcyI6ICIiLAogICAgICAgICAgICAgICAgJ2tleSc6IGVsWydkb2NUeXBlJ10KICAgICAgICAgICAgfQoKCiAgICAgICAgeFsndGlsZXMnXVtyb3dzLTFdLmFwcGVuZCh0aWxlKQoKCgogICAgaGFzaE1hcC5wdXQoInRpbGVzIiwganNvbi5kdW1wcyh4LCBlbnN1cmVfYXNjaWk9RmFsc2UpLmVuY29kZSgndXRmOCcpLmRlY29kZSgpKQogICAgcmV0dXJuIGhhc2hNYXAKCmRlZiB0aWxlc19vbl9zZWxlY3QoaGFzaE1hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgbGlzdGVuZXIgPSBoYXNoTWFwLmdldCgibGlzdGVuZXIiKQoKICAgIGlmIGxpc3RlbmVyID09ICJDYXJkc0NsaWNrIjoKICAgICAgICBwYXNzCiAgICBlbGlmIGxpc3RlbmVyID09ICdPTl9CQUNLX1BSRVNTRUQnOgoKICAgICAgICBoYXNoTWFwLnB1dCgnRmluaXNoUHJvY2VzcycsICcnKQogICAgcmV0dXJuIGhhc2hNYXAKCgpkZWYgYXBwX29uX3N0YXJ0KGhhc2hNYXAsIF9maWxlcz1Ob25lLCBfZGF0YT1Ob25lKToKCiAgICBoYXNoTWFwLnB1dCgnSW5zdGFsbENvbmZpZ3VyYXRpb24nLCAnJykKICAgIGhhc2hNYXAucHV0KCdVcGRhdGVNZW51JywgJycpCiAgICBoYXNoTWFwLnB1dCgndG9hc3QnLCAn0JrQvtC90YTQsCDRg9GB0YLQsNC90L7QstC70LXQvdCwISEhJykKICAgIHNoZW1hID0gZGF0YWJhc2VfaW5pdF9xdWVyeWVzLmRhdGFiYXNlX3NoZW1hKCkKICAgIGZvciBlbCBpbiBzaGVtYToKICAgICAgIHJlcyA9ICB1aV9nbG9iYWwuZ2V0X3F1ZXJ5X3Jlc3VsdChlbCkKICAgIGhhc2hNYXAucHV0KCd0b2FzdCcsJ9Ci0LDQsdC70LjRhtGLINGB0L7Qt9C00LDQvdGLJykKCiAgICBoYXNoTWFwLnB1dCgnZ2V0SlNPTkNvbmZpZ3VyYXRpb24nLCcnKQoKCgogICAgI9Cf0YDQvtCy0LXRgNC40LwsINGB0LLQvtC/0LDQtNCw0Y7RgiDQu9C4INGC0LXQutGD0YnQuNC5INGA0LXQu9C40Lcg0LrQvtC90YTRiyDQuCDQt9Cw0L/QuNGB0Ywg0L4g0L3QtdC8INCyINCR0JQsINC10YHQu9C4INC90LXRgiAtINGC0L4g0L3QsNC00L4g0LLRi9C/0L7Qu9C90LjRgtGMINC/0YDQvtGG0LXQtNGD0YDRgyDQvtCx0L3QvtCy0LvQtdC90LjRjwogICAgI2lmIG5vdCB1aV9nbG9iYWwuZ2V0X2NvbnN0YW50cygncmVsZWFzZScpID09IGhhc2hNYXAuZ2V0KCdyZWxlYXNlJyk6CiAgICAgICAgI3VwZGF0ZV9wcm9jLnVwZGF0ZV9vbl9yZWxlYXNlKGN1cnJlbnRfcmVsZWFzZSkKICAgICAgICAjdWlfZ2xvYmFsLmdldF9xdWVyeV9yZXN1bHQoJ1VwZGF0ZSBSU19jb25zdGFudHMgc2V0IHJlbGVhc2UgPSA/JywoaGFzaE1hcC5nZXQoJ3JlbGVhc2UnKSwpKQoKICAgIHJldHVybiBoYXNoTWFwCgoKZGVmIGZpbGVfbGlzdF9vbl9zdGFydChoYXNoTWFwLCBfZmlsZXM9Tm9uZSwgX2RhdGE9Tm9uZSk6CiAgICB0eCA9ICcnCgogICAgIyB0cmF2ZXJzZSByb290IGRpcmVjdG9yeSwgYW5kIGxpc3QgZGlyZWN0b3JpZXMgYXMgZGlycyBhbmQgZmlsZXMgYXMgZmlsZXMKICAgIGZvciByb290LCBkaXJzLCBmaWxlcyBpbiBvcy53YWxrKCIuIik6CiAgICAgICAgcGF0aCA9IHJvb3Quc3BsaXQob3Muc2VwKQogICAgICAgIHByaW50KChsZW4ocGF0aCkgLSAxKSAqICctLS0nLCBvcy5wYXRoLmJhc2VuYW1lKHJvb3QpKQogICAgICAgIGZvciBmaWxlIGluIGZpbGVzOgogICAgICAgICAgICBwcmludChsZW4ocGF0aCkgKiAnLS0tJywgZmlsZSkKCiAgICBoYXNoTWFwLnB1dCgnZmlsZXNfbGlzdCcsdHgpCiAgICByZXR1cm4gaGFzaE1hcAoKZGVmIGV2ZW50X3NlcnZpY2UoaGFzaE1hcCwgX2ZpbGVzPU5vbmUsIF9kYXRhPU5vbmUpOgogICAgaGFzaE1hcC5wdXQoJ19jb25maWd1cmF0aW9uJywnJykKICAgIGhhc2hNYXAucHV0KCd3c19ib2R5JywgaGFzaE1hcC5nZXQoJ0FORFJPSURfSUQnKSkKCiAgICByZXR1cm4gaGFzaE1hcAo=",
        "RunPython": true,
        "PyTimerTask": [],
        "DefServiceConfiguration": "event_service",
        "LaunchProcess": "",
        "ForegroundService": true,
        "StopForegroundServiceOnExit": true,
        "CommonHandlers": [
            {
                "alias": "on_start",
                "event": "onLaunch",
                "action": "run",
                "type": "python",
                "method": "app_on_start",
                "postExecute": ""
            },
            {
                "alias": "event_service",
                "event": "onWebServiceSyncCommand",
                "action": "runasync",
                "type": "python",
                "method": "event_service",
                "postExecute": ""
            }
        ],
        "MainMenu": [
            {
                "MenuItem": "faq",
                "MenuTitle": "FAQ",
                "MenuId": "01",
                "MenuTop": false
            }
        ],
        "arch2": true
        
    }
}